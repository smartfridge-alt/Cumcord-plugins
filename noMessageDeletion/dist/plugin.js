(function(){"use strict";const e={modules:window.cumcord.modules,patcher:window.cumcord.patcher}.modules,o=e.webpackModules;let t,n;e.commonModules;let s=[];const d=async({id:e})=>{let o=document.getElementById(`chat-messages-${e}`);o&&(o.classList.contains("cc-deleted-message")||(o.classList.add("cc-deleted-message"),o.style.backgroundColor="rgba(240, 71, 71, 0.1)"))},r=()=>{for(let e of s)d(e)},c=e=>e._orderedActionHandlers.MESSAGE_DELETE.find((e=>e.actionHandler.toString().includes("revealedMessageId")));let a=0;const l=()=>{const e=o.findByProps("register");try{t=c(e)}catch(e){return console.error("Failed to inject noMessageDeletion"),setTimeout(l,3e3)}a=e._orderedActionHandlers.MESSAGE_DELETE.indexOf(c(e)),e._orderedActionHandlers.MESSAGE_DELETE[a]={actionHandler:e=>{s.find((o=>o.id===e.id))||(s.push(e),d(e))},storeDidChange:function(){}}};return{async onLoad(){n=setInterval(r,300),l()},async onUnload(){clearInterval(n);for(let e of document.getElementsByClassName("gm-deleted-message"))e.remove();o.findByProps("register")._orderedActionHandlers.MESSAGE_DELETE[a]=t}}})();
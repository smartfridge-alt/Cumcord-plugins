(function(){"use strict";const e={modules:window.cumcord.modules,patcher:window.cumcord.patcher}.modules,o=e.webpackModules;let s,n;e.commonModules;let t=[];const d=async({id:e})=>{let o=document.getElementById(`chat-messages-${e}`);o&&(o.classList.contains("cc-deleted-message")||(o.classList.add("cc-deleted-message"),o.style.backgroundColor="rgba(240, 71, 71, 0.1)"))},r=()=>{for(let e of t)d(e)},c=e=>e._orderedActionHandlers.MESSAGE_DELETE.find((e=>e.actionHandler.toString().includes("revealedMessageId")));let l=0;const a=()=>{const e=o.findByProps("register");try{s=c(e),console.log("Sucessfully injected noMessageDeletion")}catch(e){return console.error("Failed to inject noMessageDeletion"),setTimeout(a,3e3)}l=e._orderedActionHandlers.MESSAGE_DELETE.indexOf(c(e)),e._orderedActionHandlers.MESSAGE_DELETE[l]={actionHandler:e=>{t.find((o=>o.id===e.id))||(t.push(e),d(e))},storeDidChange:function(){}}};return{async onLoad(){n=setInterval(r,300),a()},async onUnload(){clearInterval(n);for(let e of document.getElementsByClassName("gm-deleted-message"))e.remove();o.findByProps("register")._orderedActionHandlers.MESSAGE_DELETE[l]=s}}})();
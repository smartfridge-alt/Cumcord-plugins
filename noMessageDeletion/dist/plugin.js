(function(r){"use strict";let o,d,t=[];const l=async({id:e})=>{let n=document.getElementById(`chat-messages-${e}`);!n||n.classList.contains("cc-deleted-message")||(n.classList.add("cc-deleted-message"),n.style.backgroundColor="rgba(240, 71, 71, 0.1)")},i=()=>{for(let e of t)l(e)},a=e=>e._orderedActionHandlers.MESSAGE_DELETE.find(n=>n.actionHandler.toString().includes("revealedMessageId"));let s=0;const c=()=>{const e=r.webpackModules.findByProps("register");try{o=a(e),console.log("Sucessfully injected noMessageDeletion")}catch(n){return console.error("Failed to inject noMessageDeletion"),setTimeout(c,3e3)}s=e._orderedActionHandlers.MESSAGE_DELETE.indexOf(a(e)),e._orderedActionHandlers.MESSAGE_DELETE[s]={actionHandler:n=>{t.find(u=>u.id===n.id)||(t.push(n),l(n))},storeDidChange:function(){}}};var E={async onLoad(){d=setInterval(i,300),c()},async onUnload(){clearInterval(d);for(let e of document.getElementsByClassName("gm-deleted-message"))e.remove();r.webpackModules.findByProps("register")._orderedActionHandlers.MESSAGE_DELETE[s]=o}};return E})(cumcord.modules);
